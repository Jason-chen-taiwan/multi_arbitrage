# StandX Uptime Program Optimized Configuration

exchange:
  name: standx
  chain: bsc
  base_url: https://api.standx.com
  perps_url: https://perps.standx.com

# Trading Configuration (Uptime Program Optimized)
trading:
  symbol: BTC-USD

  # Uptime Program Requirements
  # - Both bid and ask orders within 10 bps of mark price
  # - At least 30 minutes per hour (50% uptime) for Standard tier
  # - At least 42 minutes per hour (70% uptime) for Boosted tier (1.0x multiplier)

  base_spread: 0.0008 # 8 bps (0.08%) - safe within 10 bps limit
  min_spread: 0.0006 # 6 bps minimum
  max_spread: 0.0010 # 10 bps maximum (hard limit)
  spread_buffer: 0.0002 # 2 bps buffer for price fluctuations

  # Order Sizing for Maximum Maker Hours
  # Formula: Maker Hours = (X / 2) × Multiplier
  # Cap: 2 BTC for BTC-USD
  order_size: 2.0 # Start with maximum cap
  min_order_size: 1.0 # Minimum 1 BTC for good Maker Hours
  max_order_size: 2.0 # 2 BTC cap (StandX requirement)

  # Uptime Optimization
  target_uptime: 0.75 # Target 75% uptime (above 70% Boosted threshold)
  min_uptime_per_hour: 0.70 # Minimum for Boosted tier
  check_spread_interval: 10 # Check every 10 seconds if within 10 bps

  # Order Management
  max_open_orders: 2 # 1 bid + 1 ask (both sides required)
  order_refresh_interval: 30 # Refresh every 30 seconds
  cancel_all_on_stop: true
  maintain_orders: true # Keep orders active at all times

  # Single level strategy for uptime
  num_levels: 1
  level_spacing: 0.0000

  # Inventory Management (relaxed for uptime focus)
  target_position: 0.0
  max_position: 2.0 # Allow up to 2 BTC position
  inventory_skew_factor: 0.3 # Reduced skew to maintain spread requirement

  # Post-only orders to ensure maker status
  use_post_only: true
  time_in_force: gtc

# Strategy Configuration
strategy:
  name: uptime_mm # Uptime-optimized market maker

  # Conservative volatility adjustment to stay within 10 bps
  volatility_window: 20
  volatility_multiplier: 0.5 # Reduced to keep spread tight

  # Spread management
  dynamic_spread: true
  enforce_max_spread: true # Strictly enforce 10 bps limit

  # Mark price tracking
  track_mark_price: true # Use mark price instead of mid price
  mark_price_source: api # Get from API endpoint

# Risk Management (Adjusted for uptime focus)
risk:
  # Position Limits (more lenient for uptime)
  max_position_value: 200000 # 200K USD (2 BTC @ 100K)
  max_leverage: 10

  # Loss Limits
  max_daily_loss: 5000 # Higher limit to avoid stopping during uptime
  max_trade_loss: 500

  # Drawdown Protection (relaxed)
  max_drawdown: 0.30 # 30% (higher for continuous operation)
  stop_on_max_dd: false # Don't stop, just alert

  # Emergency Controls (adjusted)
  emergency_cancel_threshold: 0.15 # 15% price move to cancel
  circuit_breaker_cooldown: 60 # 1 minute cooldown

# Monitoring & Logging
monitoring:
  enable_dashboard: true
  dashboard_port: 8080

  # Uptime Metrics
  track_uptime: true
  uptime_log_file: logs/uptime_metrics.json
  hourly_report: true # Report hourly uptime stats

  # Metrics
  metrics_interval: 60 # Every minute
  save_metrics: true
  metrics_file: logs/uptime_metrics.json

  # Logging
  log_level: INFO
  log_file: logs/uptime_mm.log
  log_rotation: midnight
  log_retention_days: 30

  # Alerts for uptime issues
  enable_alerts: true
  alert_on_spread_violation: true # Alert if spread exceeds 10 bps
  alert_on_low_uptime: true # Alert if uptime drops below 70%
  alert_on_order_rejection: true

# Performance Tuning
performance:
  use_async: true
  api_rate_limit: 100
  order_batch_size: 2 # Small batches for uptime mode
  cache_market_data: true
  cache_ttl: 5 # 5 second cache

# Uptime Program Specific Settings
uptime_program:
  enabled: true

  # Target Goals
  target_tier: MM2 # Aim for MM2 (504+ hours/month)
  target_hours_per_day: 18 # 18 hours/day × 30 days = 540 hours/month

  # Fee Benefits Tracking
  track_fee_savings: true
  expected_maker_rebate_mm1: 0.0025 # 0.25 bps
  expected_maker_rebate_mm2: 0.0050 # 0.50 bps

  # Qualification Tracking
  track_qualification: true
  log_hourly_qualification: true

  # Spread Management for Mark Price
  use_mark_price: true # Use mark price for spread calculation
  max_spread_from_mark: 0.0010 # 10 bps from mark price

  # Order Size Optimization
  optimize_for_maker_hours: true
  prefer_max_size: true # Always try to use max size (2 BTC)
  scale_with_capital: true # But scale down if capital insufficient
