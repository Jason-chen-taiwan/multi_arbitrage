# Market Maker Configuration
# 做市商配置文件

# 交易對設定
symbols:
  standx: "BTC-USD"
  hedge: "BTC_USDT_Perp"  # GRVT 對沖交易對

# 報價參數
quote:
  # 掛單距離 mark price (bps)
  # 需要 < 10 bps 才符合 StandX uptime 要求
  order_distance_bps: 9

  # 價格靠近時撤單距離 (bps)
  # 防止訂單被成交
  cancel_distance_bps: 5

  # 價格遠離時重掛距離 (bps)
  # 超出 uptime 要求後重新掛單
  rebalance_distance_bps: 12

  # 隊列位置風控：排在前 N 檔時撤單
  # 避免訂單排到最佳價附近被成交
  queue_position_limit: 3

# 倉位參數
position:
  # 單邊訂單量 (BTC)
  order_size_btc: 0.001

  # 最大持倉量 (BTC)
  # $50 餘額 @ 10x 槓桿，最多 0.005 BTC (~$475)
  max_position_btc: 0.005

# 波動率控制
volatility:
  # 觀察窗口 (秒)
  window_sec: 5

  # 波動率閾值 (bps)
  # 超過此值暫停掛單
  threshold_bps: 5.0

# 訂單參數
order:
  type: "limit"
  time_in_force: "gtc"

# 執行參數
execution:
  # 主循環間隔 (毫秒)
  tick_interval_ms: 100

  # 是否模擬模式 (實盤交易請設為 false)
  dry_run: false

  # 訂單消失判定時間 (秒)
  # 訂單從 API 消失後等待多久才判定為成交/取消
  # 需要配合 StandX API 延遲調整，建議 >= 2.0 秒
  disappear_time_sec: 2.0

# 對沖參數 (GRVT)
hedge:
  # 對沖交易所
  exchange: "grvt"

  # 是否自動匹配交易對
  # true: 自動將 StandX BTC-USD 匹配到 GRVT BTC_USDT_Perp
  auto_match_symbol: true

  # 明確的交易對映射（優先使用）
  symbol_map:
    "BTC-USD": "BTC_USDT_Perp"
    "ETH-USD": "ETH_USDT_Perp"
    "SOL-USD": "SOL_USDT_Perp"

  # 對沖超時 (毫秒)
  timeout_ms: 1000

  # 重試次數
  retry_count: 3

  # 重試間隔 (毫秒)
  retry_delay_ms: 100

  # 最大未對沖倉位 (BTC)
  # 超過此值會部分平倉
  max_unhedged_position: 0.01

# Uptime Program 參數 (StandX 官方要求)
uptime:
  # 訂單必須在 mark price ±10 bps 內才算 qualified
  max_distance_bps: 10

  # Boosted tier 需要 70% uptime
  boosted_threshold: 0.70

  # Standard tier 需要 50% uptime
  standard_threshold: 0.50
