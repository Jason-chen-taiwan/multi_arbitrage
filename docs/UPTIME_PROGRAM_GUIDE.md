# StandX Market Maker Uptime Program 優化指南

## 📋 計劃概述

StandX Market Maker Uptime Program 是一個獎勵做市商持續提供流動性的計劃。

### 💰 獎勵結構

- **每月獎勵池**：5,000,000 代幣
- **獎勵分配**：按 Maker Hours 比例分配
- **手續費折扣**：達到門檻可享特殊費率

## 🎯 參與資格

### 基本要求

每小時內，需要在**買賣兩側**同時維持訂單，且：

1. ✅ **價差要求**：訂單必須在 mark price 的 **10 bps** 範圍內
2. ✅ **時間要求**：每小時至少維持 **30 分鐘**（50%）
3. ✅ **雙邊要求**：買單和賣單**都必須存在**
4. ✅ **訂單上限**：每側訂單價值有上限
   - BTC-USD: 2 BTC
   - ETH-USD: 60 ETH

### 計算層級

| 層級     | 正常運行時間        | 乘數 |
| -------- | ------------------- | ---- |
| Boosted  | ≥70% (42+分鐘/小時) | 1.0x |
| Standard | ≥50% (30+分鐘/小時) | 0.5x |

**關鍵**：更高的正常運行時間 = 更好的乘數 = 更多獎勵！

## 📊 Maker Hours 計算公式

```
Maker Hours = (X / 2) × Multiplier
```

**X 的計算**：

1. 系統在每小時內以不規則間隔記錄你的訂單大小（取買賣較小值，上限 2 BTC）
2. 小時結束時，所有記錄值按降序排列
3. X₇₀ = 第 70 百分位的值（top 70%）
4. X₅₀ = 第 50 百分位的值（top 50%）

**最終獎勵**：

```
max( (X₇₀ / 2) × 1.0,  (X₅₀ / 2) × 0.5 )
```

這確保你總是獲得更好的結果！

## 🎓 實例分析

| 用戶  | X₇₀ | X₅₀ | Boosted 計算         | Standard 計算         | 最終 Maker Hours | 狀態    |
| ----- | --- | --- | -------------------- | --------------------- | ---------------- | ------- |
| Jack  | 2.0 | 2.2 | (2/2) × 1.0 = 1.0    | (2/2) × 0.5 = 1.0     | **1.0**          | 🟢 深綠 |
| Alice | 1.0 | 1.8 | (1/2) × 1.0 = 0.5    | (1.8/2) × 0.5 = 0.45  | **0.5**          | 🟢 深綠 |
| Bob   | 1.0 | 1.4 | (1/2) × 1.0 = 0.5    | (1.4/2) × 0.5 = 0.35  | **0.5**          | 🟢 深綠 |
| Jimmy | 0.1 | 0.5 | (0.1/2) × 1.0 = 0.05 | (0.5/2) × 0.5 = 0.125 | **0.125**        | 🟡 淺綠 |

### 顏色指標含義

- 🟢 **深綠**：Maker Hours > 0.5（優秀表現）
- 🟡 **淺綠**：Maker Hours > 0 但 ≤ 0.5（活躍參與）
- ⚪ **灰色**：Maker Hours = 0（未活躍）

## 💎 特殊手續費率

累積足夠的 Maker Hours 可解鎖專屬費率！

| 層級    | 月度要求         | Taker Fee | Maker Rebate  |
| ------- | ---------------- | --------- | ------------- |
| **MM1** | > 360 小時 (50%) | 2.25 bps  | **+0.25 bps** |
| **MM2** | > 504 小時 (70%) | 2.00 bps  | **+0.50 bps** |

### 關鍵優勢

- ✅ **降低成本**：Taker 費用大幅降低
- ✅ **Maker 回饋**：提供流動性還能賺取費用！
- ✅ **每月更新**：每月評估，符合條件即可享受下個月優惠

### 運作方式

1. 本月累積 Maker Hours
2. 月底評估是否達標（360+ 或 504+）
3. 下個月享受特殊費率
4. 每月重新評估以持續享受優惠

## 🚀 本系統優化策略

### 1. 嚴格價差控制

```yaml
base_spread: 0.0008 # 8 bps（安全範圍內）
max_spread: 0.0010 # 10 bps 硬上限
spread_buffer: 0.0002 # 2 bps 緩衝（應對價格波動）
```

**邏輯**：保持在 10 bps 以下，留有安全邊際。

### 2. 最大化訂單大小

```yaml
order_size: 2.0 # 使用最大上限 2 BTC
min_order_size: 1.0 # 最低 1 BTC 保證有效 Maker Hours
```

**公式影響**：

- 訂單大小直接影響 X₇₀ 和 X₅₀
- 2 BTC → Maker Hours = (2/2) × 1.0 = **1.0**（最大值）
- 0.1 BTC → Maker Hours = (0.1/2) × 1.0 = **0.05**（很小）

### 3. 高正常運行時間維護

```yaml
target_uptime: 0.75 # 目標 75%（超過 70% Boosted 門檻）
min_uptime_per_hour: 0.70 # Boosted 層級最低要求
order_refresh_interval: 30 # 每 30 秒刷新（保持穩定）
```

**目標**：

- 70%+ 正常運行時間 → 1.0x 乘數
- 50-70% → 0.5x 乘數
- <50% → 不符合資格

### 4. Mark Price 追蹤

```python
# 使用 mark price 而非 mid price
mark_price = await exchange.get_mark_price()

# 計算價差
spread = abs(order_price - mark_price) / mark_price

# 確保 <= 10 bps
if spread > 0.0010:
    adjust_order_price()
```

**重要**：Uptime Program 使用 mark price 計算價差！

## 📈 每月目標規劃

### MM1 層級目標（360+ 小時）

```
每日所需小時數 = 360 / 30 = 12 小時/天
正常運行時間 = 12 / 24 = 50%

策略：
- 維持 50%+ 正常運行時間
- 訂單大小 1-2 BTC
- 每小時 Maker Hours ≈ 0.5
- 月度總計：0.5 × 24 × 30 = 360 小時
```

### MM2 層級目標（504+ 小時）

```
每日所需小時數 = 504 / 30 = 16.8 小時/天
正常運行時間 = 16.8 / 24 = 70%

策略：
- 維持 70%+ 正常運行時間（Boosted tier）
- 訂單大小 2 BTC（最大）
- 每小時 Maker Hours = 1.0
- 月度總計：1.0 × 24 × 30 = 720 小時 ✅
```

### 超級積極策略（最大化獎勵）

```
目標：最大化 Maker Hours

優化點：
1. 24/7 運行（100% 正常運行時間）
2. 始終使用 2 BTC 訂單
3. 保持在 8 bps 價差（留有 2 bps 緩衝）
4. 快速替換已成交訂單

預期結果：
- 每小時 Maker Hours = 1.0
- 每日 = 24 小時
- 每月 = 720 小時（遠超 MM2 要求）
- 費率：2.00 bps taker + 0.50 bps maker rebate
```

## ⚠️ 重要注意事項

### 1. 價格波動管理

> Mark price 會持續根據市場條件更新。你的訂單與價差的距離會對照每個快照時的當前 mark price 進行評估。

**建議**：

- 保持一些緩衝空間（2-3 bps）
- 訂單放置在略緊於門檻的位置
- 定期檢查和調整訂單位置

### 2. 雙邊要求

- 必須**同時**有買單和賣單
- 任何一側缺失 = 該時段不符合資格
- 系統取兩側中**較小的訂單量**

### 3. 資本效率

```
所需資本（BTC-USD，2 BTC 訂單）：
- 訂單保證金：取決於槓桿
- 價格：假設 BTC = $100,000
- 價值：2 BTC = $200,000

建議：
- 使用 5-10x 槓桿
- 實際所需：$20,000 - $40,000
- 留有餘裕應對波動
```

## 🎯 使用本系統參與

### 1. 使用 Uptime 配置

```bash
python scripts/run_mm.py config/uptime_config.yaml
```

### 2. 監控儀表板

系統會實時顯示：

```
🎯 Uptime Market Maker Status
   Mark Price: $95,234.56
   Current Uptime: 75.3% | Target: 70%
   Tier: 🟢 Boosted (1.0x)
   Runtime: 12.5 hours

   📍 Bid:  2.000 BTC @ $95,158.23 (8.00 bps)
   📍 Ask:  2.000 BTC @ $95,310.89 (8.00 bps)

   ✅ Within 10 bps requirement (8.00 bps)

   Est. Maker Hours/hour: 1.000
   Est. Monthly Hours: 720.0 (Target: 504 (MM2))
```

### 3. 關鍵指標追蹤

- ✅ **正常運行時間百分比**：保持 70%+
- ✅ **價差符合性**：確保 ≤ 10 bps
- ✅ **訂單大小**：盡量使用 2 BTC
- ✅ **Maker Hours 累積**：追蹤每日進度

## 💡 專業建議

1. **最大化正常運行時間**

   - 目標 70%+ 以解鎖 1.0x 乘數
   - 使用穩定的服務器和網絡
   - 設置自動重啟機制

2. **保持在價差範圍內**

   - 訂單保持在 mark price 10 bps 內
   - 使用 2-3 bps 緩衝空間
   - 定期檢查 mark price

3. **平衡雙邊**

   - 確保買賣兩側都有訂單
   - 系統取較小值，所以保持均衡

4. **訂單大小很重要**

   - 更大的訂單（最多 2 BTC）= 更多 Maker Hours
   - 但要確保有足夠資本支持

5. **目標 MM 層級**
   - 瞄準 360+ 小時（MM1）或 504+ 小時（MM2）
   - 享受降低的費用和 maker rebate

## 📊 收益計算示例

### 假設場景

- 策略：Uptime MM
- 訂單大小：2 BTC
- 正常運行時間：75%（Boosted tier）
- 運行時間：30 天

### Maker Hours 計算

```
每小時 Maker Hours = (2 / 2) × 1.0 = 1.0
每日 = 1.0 × 24 = 24 Maker Hours
每月 = 24 × 30 = 720 Maker Hours
```

### 獎勵計算

```
假設總池其他參與者的 Maker Hours = 100,000
你的份額 = 720 / 100,720 = 0.715%

你的獎勵 = 5,000,000 × 0.00715 = 35,750 代幣
```

### 費用節省（MM2 層級）

```
假設月交易量：100 BTC

標準費用：
- Taker: 4 bps = 100 BTC × $100,000 × 0.0004 = $4,000

MM2 費用：
- Taker: 2 bps = 100 BTC × $100,000 × 0.0002 = $2,000
- Maker rebate: 0.5 bps = -$500

節省 = $4,000 - $2,000 + $500 = $2,500/月
```

### 總收益

```
代幣獎勵價值（假設 $0.10/token）= 35,750 × $0.10 = $3,575
費用節省 = $2,500
總計 = $6,075/月
```

## 🔥 立即開始

1. **配置環境**

   ```bash
   cp .env.example .env
   # 填入你的錢包私鑰
   ```

2. **使用 Uptime 配置**

   ```bash
   python scripts/run_mm.py config/uptime_config.yaml
   ```

3. **監控和優化**

   - 檢查正常運行時間百分比
   - 確保價差符合要求
   - 追蹤 Maker Hours 累積

4. **達到目標**
   - MM1: 360+ 小時/月
   - MM2: 504+ 小時/月
   - 享受費用折扣和獎勵！

---

**活動持續時間**：2026 年 1 月 5 日開始 - 待公布結束日期

立即參與，成為 StandX 做市商，賺取被動收入！🚀
